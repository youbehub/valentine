/* ═══════════════════════════════════════════════════
   VALENTINE CINEMATIC EXPERIENCE — STYLE SYSTEM
   Premium · Emotional · Cinematic
   ═══════════════════════════════════════════════════ */

/* ─── DESIGN TOKENS ─── */
:root {
    --c-bg:          #0a0010;
    --c-pink:        #ff4081;
    --c-rose:        #ff6b95;
    --c-lilac:       #e040fb;
    --c-purple:      #7c4dff;
    --c-red:         #ff1744;
    --c-soft:        #ffb3cc;
    --c-text:        #fff;
    --c-text-dim:    rgba(255,179,204,.6);
    --c-glass-bg:    rgba(255,255,255,.06);
    --c-glass-border:rgba(255,255,255,.1);
    --font-display:  'Playfair Display', Georgia, serif;
    --font-body:     'Poppins', sans-serif;
    --ease-out:      cubic-bezier(.4,0,.2,1);
    --ease-spring:   cubic-bezier(.175,.885,.32,1.275);
    --r-card:        20px;
}

/* ─── RESET ─── */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{-webkit-text-size-adjust:100%;scroll-behavior:smooth}
body{
    font-family:var(--font-body);
    background:var(--c-bg);
    color:var(--c-text);
    min-height:100vh;min-height:100dvh;
    overflow-x:hidden;
    -webkit-font-smoothing:antialiased;
}
img,svg{display:block;max-width:100%}
button{font-family:inherit;cursor:pointer;border:none;background:none;color:inherit}
input{font-family:inherit}

/* ─── CANVAS LAYERS ─── */
#particleCanvas,#fireworkCanvas{
    position:fixed;inset:0;width:100%;height:100%;
    pointer-events:none;z-index:0;
}
#fireworkCanvas{z-index:9998}
#floatingHearts{position:fixed;inset:0;overflow:hidden;pointer-events:none;z-index:1}

.floating-heart{
    position:absolute;bottom:-40px;
    animation:floatUp linear forwards;
    opacity:.7;pointer-events:none;
    filter:drop-shadow(0 0 6px rgba(255,64,129,.3));
}
@keyframes floatUp{
    0%  {transform:translateX(0) rotate(0);opacity:.7}
    50% {opacity:.9}
    100%{transform:translateX(40px) rotate(25deg) translateY(-110vh);opacity:0}
}

/* ─── SCREEN SYSTEM ─── */
.screen{
    position:fixed;inset:0;
    display:flex;align-items:center;justify-content:center;
    opacity:0;visibility:hidden;
    transition:opacity .6s var(--ease-out),visibility .6s;
    z-index:10;overflow-y:auto;
    padding:24px 16px;
}
.screen.active{opacity:1;visibility:visible}
.screen-content{
    position:relative;z-index:2;
    width:100%;max-width:560px;
    text-align:center;
}

/* ─── GLASS CARD ─── */
.glass-card{
    background:var(--c-glass-bg);
    border:1px solid var(--c-glass-border);
    border-radius:var(--r-card);
    backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
    padding:clamp(24px,5vw,40px);
    box-shadow:0 8px 32px rgba(0,0,0,.4),inset 0 1px 0 rgba(255,255,255,.05);
}

/* ─── BUTTONS ─── */
.btn-primary{
    display:inline-block;
    padding:14px 40px;border-radius:50px;
    background:linear-gradient(135deg,var(--c-pink),var(--c-lilac));
    color:#fff;font-weight:600;font-size:1rem;
    letter-spacing:.5px;
    box-shadow:0 4px 20px rgba(255,64,129,.35);
    transition:transform .3s var(--ease-spring),box-shadow .3s;
    animation:btnPulse 3s ease infinite;
}
.btn-primary:hover{transform:translateY(-3px) scale(1.04);box-shadow:0 8px 30px rgba(255,64,129,.5)}
.btn-primary:active{transform:scale(.97)}

.btn-secondary{
    display:inline-block;
    padding:14px 40px;border-radius:50px;
    background:rgba(255,255,255,.08);
    border:1px solid rgba(255,255,255,.15);
    color:#fff;font-weight:500;font-size:1rem;
    transition:transform .3s,background .3s;
}
.btn-secondary:hover{transform:translateY(-2px);background:rgba(255,255,255,.14)}

@keyframes btnPulse{
    0%,100%{box-shadow:0 4px 20px rgba(255,64,129,.35)}
    50%    {box-shadow:0 4px 30px rgba(255,64,129,.55)}
}

/* ─── MUSIC TOGGLE ─── */
.music-toggle{
    position:fixed;top:20px;right:20px;z-index:9999;
    width:44px;height:44px;border-radius:50%;
    background:rgba(255,255,255,.08);
    backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
    border:1px solid rgba(255,255,255,.12);
    display:flex;align-items:center;justify-content:center;
    font-size:1.2rem;
    transition:transform .3s,background .3s;
}
.music-toggle:hover{transform:scale(1.1);background:rgba(255,255,255,.15)}
.music-toggle.playing{animation:musicBounce 1.2s ease infinite}
.music-toggle.muted{opacity:.5}
@keyframes musicBounce{
    0%,100%{transform:scale(1)}
    50%{transform:scale(1.1)}
}

/* ─── INSTALL BTN ─── */
.install-btn{
    position:fixed;top:20px;left:20px;z-index:9999;
    padding:8px 16px;border-radius:50px;
    background:rgba(255,255,255,.1);
    backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
    font-size:.85rem;
    border:1px solid rgba(255,255,255,.12);
    transition:transform .3s,opacity .3s;
}
.install-btn:hover{transform:scale(1.05)}

/* ═══════════════════════════════════════════
   SCREEN 1 — NAME ENTRY
   ═══════════════════════════════════════════ */
.name-screen{
    background:radial-gradient(circle at 50% 40%,#1e0530,#0a0010 70%);
    z-index:1000;
}
.name-card{
    padding:clamp(32px,6vw,48px) clamp(24px,5vw,44px);
    max-width:420px;margin:0 auto;
    animation:cardEnter .8s var(--ease-spring) both;
}
.name-card-title{
    font-family:var(--font-display);
    font-size:clamp(1.5rem,5vw,2.1rem);font-weight:700;
    margin-bottom:6px;
}
.name-card-sub{
    font-size:clamp(.85rem,2.5vw,1rem);
    color:var(--c-text-dim);font-weight:300;
    margin-bottom:28px;
}
.name-input-wrap{position:relative;margin-bottom:24px}
.name-input{
    width:100%;padding:15px 24px;border-radius:50px;
    border:1.5px solid rgba(255,105,135,.2);
    background:rgba(255,255,255,.04);
    color:#fff;font-size:1rem;text-align:center;
    letter-spacing:.5px;outline:none;
    transition:all .4s ease;-webkit-appearance:none;
}
.name-input::placeholder{color:rgba(255,179,204,.35);font-style:italic}
.name-input:focus{
    border-color:var(--c-pink);
    background:rgba(255,64,129,.06);
    box-shadow:0 0 0 4px rgba(255,64,129,.1),0 0 30px rgba(255,64,129,.12);
}
.input-glow{
    position:absolute;bottom:-6px;left:50%;
    transform:translateX(-50%);
    width:60%;height:12px;
    background:radial-gradient(ellipse,rgba(255,64,129,.25),transparent);
    border-radius:50%;opacity:0;
    transition:opacity .4s;pointer-events:none;
}
.name-input:focus~.input-glow{opacity:1}
.btn-name{animation:none;transition:all .4s}
.btn-name:disabled{opacity:.35;cursor:not-allowed;transform:none;box-shadow:none}
.btn-name:disabled:hover{transform:none;box-shadow:none}

/* ═══════════════════════════════════════════
   SCREEN 2 — NEON REVEAL
   ═══════════════════════════════════════════ */
.neon-reveal-screen{z-index:998;background:#050008;overflow:hidden}
.neon-backdrop{
    position:absolute;inset:0;
    background:radial-gradient(ellipse at 50% 50%,
        rgba(255,64,129,.08) 0%,rgba(120,40,200,.05) 40%,transparent 70%);
    animation:backdropPulse 4s ease infinite;
}
@keyframes backdropPulse{
    0%,100%{opacity:.6;transform:scale(1)}
    50%    {opacity:1;transform:scale(1.05)}
}
.neon-content{max-width:700px}
.neon-pre{
    font-size:clamp(.9rem,2.5vw,1.15rem);
    font-weight:300;color:var(--c-text-dim);
    letter-spacing:1px;margin-bottom:12px;
    opacity:0;animation:neonFadeIn 1s ease .3s forwards;
}
.neon-name{
    font-family:var(--font-display);
    font-size:clamp(3rem,12vw,7rem);font-weight:900;
    line-height:1.1;color:#fff;
    text-shadow:
        0 0 10px rgba(255,64,129,.8),
        0 0 20px rgba(255,64,129,.6),
        0 0 40px rgba(255,64,129,.4),
        0 0 80px rgba(255,64,129,.2),
        0 0 120px rgba(224,64,251,.15);
    opacity:0;transform:scale(.7);
    animation:neonRevealIn 1.2s var(--ease-spring) .6s forwards,
               neonFlicker 4s ease 1.8s infinite,
               neonBreath  3s ease 2.5s infinite;
}
.neon-underline{
    width:0;height:3px;margin:16px auto 20px;
    background:linear-gradient(90deg,transparent,var(--c-pink),var(--c-lilac),transparent);
    border-radius:3px;box-shadow:0 0 12px var(--c-pink);
    animation:neonLineExpand .8s ease 1.4s forwards;
}
.neon-post{
    font-family:var(--font-display);
    font-size:clamp(1rem,3vw,1.3rem);
    font-weight:400;font-style:italic;
    color:var(--c-soft);opacity:0;
    animation:neonFadeIn 1s ease 1.8s forwards;
}
@keyframes neonRevealIn{
    0%  {opacity:0;transform:scale(.7) translateY(20px)}
    60% {opacity:1;transform:scale(1.05) translateY(-4px)}
    100%{opacity:1;transform:scale(1) translateY(0)}
}
@keyframes neonFadeIn{
    from{opacity:0;transform:translateY(14px)}
    to  {opacity:1;transform:translateY(0)}
}
@keyframes neonFlicker{
    0%,100%{opacity:1}5%{opacity:.85}6%{opacity:1}
    40%{opacity:1}42%{opacity:.9}43%{opacity:1}
    70%{opacity:1}72%{opacity:.88}73%{opacity:1}
}
@keyframes neonBreath{
    0%,100%{text-shadow:0 0 10px rgba(255,64,129,.8),0 0 20px rgba(255,64,129,.6),0 0 40px rgba(255,64,129,.4),0 0 80px rgba(255,64,129,.2)}
    50%    {text-shadow:0 0 14px rgba(255,64,129,1),0 0 28px rgba(255,64,129,.7),0 0 56px rgba(255,64,129,.5),0 0 100px rgba(255,64,129,.3),0 0 150px rgba(224,64,251,.15)}
}
@keyframes neonLineExpand{from{width:0}to{width:clamp(120px,30vw,220px)}}

/* Sparkles */
.neon-sparkles{position:absolute;inset:0;pointer-events:none;z-index:3}
.sparkle{
    position:absolute;width:4px;height:4px;border-radius:50%;
    background:#fff;
    box-shadow:0 0 6px 2px rgba(255,64,129,.6),0 0 12px 4px rgba(224,64,251,.3);
    animation:sparkleFade var(--dur) ease var(--delay) infinite;
}
@keyframes sparkleFade{
    0%,100%{opacity:0;transform:scale(0)}
    30%{opacity:1;transform:scale(1.2)}
    70%{opacity:.6;transform:scale(.8)}
}

/* ═══════════════════════════════════════════
   SCREEN 3 — LOADER
   ═══════════════════════════════════════════ */
.loader-screen{
    background:radial-gradient(circle at 50% 50%,#150020,var(--c-bg) 70%);
}
.loader-content{display:flex;flex-direction:column;align-items:center;gap:20px}
.loader-heart-svg{
    animation:loaderBeat 1.2s ease infinite;
    filter:drop-shadow(0 0 20px rgba(255,64,129,.4));
}
@keyframes loaderBeat{
    0%,100%{transform:scale(1)}
    15%{transform:scale(1.15)}
    30%{transform:scale(1)}
    45%{transform:scale(1.1)}
}
.loader-title{
    font-family:var(--font-display);
    font-size:clamp(1.1rem,3vw,1.4rem);
    font-weight:400;color:var(--c-soft);
}
.loader-bar{
    width:min(280px,80vw);height:4px;border-radius:4px;
    background:rgba(255,255,255,.08);overflow:hidden;
}
.loader-bar-fill{
    height:100%;width:0;border-radius:4px;
    background:linear-gradient(90deg,var(--c-pink),var(--c-lilac));
    transition:width .1s linear;
    box-shadow:0 0 10px var(--c-pink);
}

/* ═══════════════════════════════════════════
   SCREEN 4 — START / INTRO
   ═══════════════════════════════════════════ */
.start-screen{
    background:radial-gradient(ellipse at 50% 30%,#1a0028,var(--c-bg) 70%);
}
.main-title{
    font-family:var(--font-display);
    font-size:clamp(2rem,7vw,3.4rem);font-weight:900;
    background:linear-gradient(135deg,#fff,var(--c-soft));
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    background-clip:text;
    margin-bottom:8px;
    animation:titleFloat 6s ease infinite;
}
@keyframes titleFloat{
    0%,100%{transform:translateY(0)}
    50%{transform:translateY(-8px)}
}
.sub-title{
    font-family:var(--font-display);
    font-size:clamp(1.1rem,3.5vw,1.5rem);
    font-weight:400;font-style:italic;
    color:var(--c-soft);margin-bottom:28px;
}
.heart-inline{
    display:inline-block;
    animation:heartPulse 1.5s ease infinite;
}
@keyframes heartPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.2)}}
.typing-text{
    min-height:28px;margin-bottom:32px;
    font-size:clamp(.95rem,2.5vw,1.1rem);
    color:var(--c-text-dim);font-weight:300;
}
.typing-cursor{
    display:inline-block;width:2px;height:1em;
    background:var(--c-pink);vertical-align:text-bottom;
    animation:blink .7s step-end infinite;
}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}

/* ═══════════════════════════════════════════
   SCREEN 5a — GENDER SELECT
   ═══════════════════════════════════════════ */
.gender-screen{
    background:radial-gradient(ellipse at 50% 45%,#1a0028,var(--c-bg) 70%);
}
.gender-card{
    padding:clamp(28px,5vw,44px);max-width:440px;margin:0 auto;
    animation:cardEnter .8s var(--ease-spring) both;
}
.gender-title{
    font-family:var(--font-display);
    font-size:clamp(1.4rem,4.5vw,1.9rem);font-weight:700;
    margin-bottom:6px;
}
.gender-sub{
    font-size:clamp(.85rem,2.5vw,1rem);
    color:var(--c-text-dim);font-weight:300;margin-bottom:28px;
}
.gender-buttons{display:flex;gap:14px;justify-content:center;flex-wrap:wrap}
.btn-gender{
    display:flex;flex-direction:column;align-items:center;gap:8px;
    padding:24px 28px;border-radius:var(--r-card);
    background:rgba(255,255,255,.05);
    border:1.5px solid rgba(255,255,255,.1);
    transition:all .4s var(--ease-spring);
    min-width:140px;
}
.btn-gender:hover{
    transform:translateY(-4px) scale(1.04);
    border-color:var(--c-pink);
    background:rgba(255,64,129,.08);
    box-shadow:0 8px 30px rgba(255,64,129,.2);
}
.gender-emoji{font-size:2.4rem;line-height:1}
.gender-label{font-size:.95rem;font-weight:500}
.btn-queen:hover{border-color:#e040fb;box-shadow:0 8px 30px rgba(224,64,251,.2)}
.btn-king:hover{border-color:#7c4dff;box-shadow:0 8px 30px rgba(124,77,255,.2)}

/* ═══════════════════════════════════════════
   SCREEN 5b — INTENSITY MODE
   ═══════════════════════════════════════════ */
.intensity-screen{
    background:radial-gradient(ellipse at 50% 50%,#1a0028,var(--c-bg) 70%);
}
.intensity-card{
    padding:clamp(28px,5vw,44px);max-width:460px;margin:0 auto;
    animation:cardEnter .8s var(--ease-spring) both;
}
.intensity-title{
    font-family:var(--font-display);
    font-size:clamp(1.3rem,4vw,1.7rem);font-weight:700;
    margin-bottom:6px;
}
.intensity-sub{
    font-size:clamp(.85rem,2.5vw,1rem);
    color:var(--c-text-dim);font-weight:300;margin-bottom:28px;
}
.intensity-buttons{display:flex;gap:14px;justify-content:center;flex-wrap:wrap}
.btn-intensity{
    display:flex;flex-direction:column;align-items:center;gap:6px;
    padding:22px 28px;border-radius:var(--r-card);
    background:rgba(255,255,255,.05);
    border:1.5px solid rgba(255,255,255,.1);
    transition:all .4s var(--ease-spring);
    min-width:150px;
}
.btn-intensity:hover{
    transform:translateY(-4px) scale(1.04);
    background:rgba(255,64,129,.08);
}
.btn-normal:hover{border-color:var(--c-pink);box-shadow:0 8px 30px rgba(255,64,129,.2)}
.btn-passion:hover{border-color:#ff1744;box-shadow:0 8px 30px rgba(255,23,68,.25)}
.intensity-icon{font-size:2rem;line-height:1}
.intensity-label{font-size:.95rem;font-weight:600}
.intensity-desc{font-size:.78rem;color:var(--c-text-dim);font-weight:300}

/* ═══════════════════════════════════════════
   SCREEN 5c — QUIZ
   ═══════════════════════════════════════════ */
.quiz-screen{
    background:radial-gradient(ellipse at 50% 60%,#180025,var(--c-bg) 70%);
    transition:background .8s ease;
}
/* Spicy mode overlay */
.quiz-screen.spicy-active{
    background:radial-gradient(ellipse at 50% 60%,#250010,#0a0005 70%);
}
.quiz-screen.spicy-active::after{
    content:'';position:absolute;inset:0;
    background:radial-gradient(ellipse at 50% 50%,rgba(255,20,40,.06),transparent 60%);
    animation:spicyPulse 2s ease infinite;
    pointer-events:none;z-index:1;
}
@keyframes spicyPulse{
    0%,100%{opacity:.3}
    50%{opacity:.7}
}
/* Passion mode glow on entire quiz */
.quiz-screen.passion-glow{
    box-shadow:inset 0 0 80px rgba(255,23,68,.06);
}

.quiz-category-badge{
    display:inline-block;
    padding:4px 14px;border-radius:50px;
    font-size:.75rem;font-weight:500;
    letter-spacing:.5px;text-transform:uppercase;
    margin-bottom:12px;
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.1);
    transition:all .4s;
}
.quiz-category-badge.sweet{background:rgba(255,183,197,.12);color:#ffb7c5;border-color:rgba(255,183,197,.25)}
.quiz-category-badge.romantic{background:rgba(224,64,251,.1);color:#ea80fc;border-color:rgba(224,64,251,.2)}
.quiz-category-badge.spicy{background:rgba(255,23,68,.12);color:#ff5252;border-color:rgba(255,23,68,.25);animation:spicyBadge 1.5s ease infinite}
@keyframes spicyBadge{
    0%,100%{box-shadow:0 0 8px rgba(255,23,68,.2)}
    50%{box-shadow:0 0 18px rgba(255,23,68,.4)}
}

/* Heartbeat overlay for spicy questions */
.quiz-screen.spicy-active .question-card{
    animation:cardEnter .55s var(--ease-spring) both, heartbeatCard 1.2s ease infinite;
}
@keyframes heartbeatCard{
    0%,100%{box-shadow:0 8px 32px rgba(0,0,0,.4),inset 0 1px 0 rgba(255,255,255,.05)}
    15%{box-shadow:0 8px 32px rgba(0,0,0,.4),0 0 20px rgba(255,23,68,.15),inset 0 1px 0 rgba(255,255,255,.05)}
    30%{box-shadow:0 8px 32px rgba(0,0,0,.4),inset 0 1px 0 rgba(255,255,255,.05)}
    45%{box-shadow:0 8px 32px rgba(0,0,0,.4),0 0 15px rgba(255,23,68,.1),inset 0 1px 0 rgba(255,255,255,.05)}
}

.section-heading{
    font-family:var(--font-display);
    font-size:clamp(1.4rem,4vw,1.8rem);
    font-weight:700;margin-bottom:20px;
    background:linear-gradient(135deg,#fff,var(--c-soft));
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    background-clip:text;
}
.quiz-progress{margin-bottom:16px}
#progressCounter{font-size:.85rem;color:var(--c-text-dim);font-weight:300}
.progress-bar{
    height:4px;border-radius:4px;
    background:rgba(255,255,255,.08);margin:8px 0;
    overflow:hidden;
}
.progress-fill{
    height:100%;width:0;border-radius:4px;
    background:linear-gradient(90deg,var(--c-pink),var(--c-lilac));
    transition:width .5s var(--ease-out);
}
.progress-hearts-row{display:flex;justify-content:center;gap:8px;margin-top:6px}
.progress-heart-dot{
    font-size:.9rem;opacity:.25;
    transition:opacity .4s,transform .4s;
}
.progress-heart-dot.filled{opacity:1;transform:scale(1.3)}
.question-card{
    margin-bottom:20px;
    animation:cardEnter .55s var(--ease-spring) both;
}
@keyframes cardEnter{
    from{opacity:0;transform:translateY(20px) scale(.96)}
    to  {opacity:1;transform:translateY(0) scale(1)}
}
.question-text{
    font-family:var(--font-display);
    font-size:clamp(1.1rem,3vw,1.35rem);
    font-weight:600;line-height:1.5;margin-bottom:12px;
}
.love-meter{
    font-size:.85rem;color:var(--c-text-dim);
    font-weight:300;
}
#lovePercent{color:var(--c-pink);font-weight:600}
.options-container{display:flex;flex-direction:column;gap:10px}
.option-btn{
    padding:14px 20px;border-radius:14px;
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.08);
    color:#fff;font-size:.95rem;
    text-align:left;
    transition:all .3s var(--ease-out);
}
.option-btn:hover{background:rgba(255,64,129,.1);border-color:rgba(255,64,129,.3);transform:translateX(4px)}
.option-btn.correct{
    background:rgba(76,175,80,.15);border-color:#4caf50;
    box-shadow:0 0 20px rgba(76,175,80,.2);
}
.option-btn.wrong{
    background:rgba(244,67,54,.12);border-color:#f44336;
    animation:shake .4s ease;
}
@keyframes shake{0%,100%{transform:translateX(0)}20%{transform:translateX(-8px)}40%{transform:translateX(8px)}60%{transform:translateX(-5px)}80%{transform:translateX(5px)}}

/* Heart explosion */
.heart-explosion{position:absolute;inset:0;pointer-events:none;overflow:hidden}
.explosion-heart{
    position:absolute;font-size:1.2rem;
    animation:explode .9s ease forwards;
    pointer-events:none;
}
@keyframes explode{
    0%  {opacity:1;transform:translate(0,0) scale(1)}
    100%{opacity:0;transform:translate(var(--tx),var(--ty)) scale(0)}
}

/* ═══════════════════════════════════════════
   SCREEN 6 — MINI GAME
   ═══════════════════════════════════════════ */
.mini-game-screen{
    background:radial-gradient(ellipse at 50% 80%,#1a0028,var(--c-bg) 70%);
}
.game-stats{
    display:flex;justify-content:center;gap:32px;
    font-size:1.1rem;font-weight:500;margin-bottom:16px;
}
.game-area{
    position:relative;
    width:100%;height:min(55vh,360px);
    border-radius:var(--r-card);
    background:rgba(255,255,255,.03);
    border:1px solid rgba(255,255,255,.06);
    overflow:hidden;margin-bottom:16px;
}
.falling-heart{
    position:absolute;top:-40px;font-size:1.6rem;
    cursor:pointer;user-select:none;
    animation:fall linear forwards;
    transition:transform .15s;
    filter:drop-shadow(0 0 4px rgba(255,64,129,.4));
}
.falling-heart:hover{transform:scale(1.3)}
.falling-heart.caught{
    animation:catchPop .35s ease forwards !important;
    pointer-events:none;
}
@keyframes fall{from{top:-40px}to{top:calc(100% + 40px)}}
@keyframes catchPop{
    0%  {transform:scale(1);opacity:1}
    50% {transform:scale(1.6);opacity:.5}
    100%{transform:scale(0);opacity:0}
}

/* ═══════════════════════════════════════════
   SCREEN 7 — FOREVER QUESTION
   ═══════════════════════════════════════════ */
.forever-screen{
    background:radial-gradient(ellipse at 50% 50%,#200030,var(--c-bg) 70%);
}
.forever-card{
    padding:clamp(32px,6vw,48px);
    max-width:460px;margin:0 auto;
    animation:cardEnter .8s var(--ease-spring) both;
}
.forever-title{
    font-family:var(--font-display);
    font-size:clamp(1.4rem,5vw,2rem);font-weight:700;
    line-height:1.3;margin-bottom:8px;
}
.forever-sub{
    font-size:clamp(.9rem,2.5vw,1.05rem);
    color:var(--c-text-dim);font-weight:300;
    margin-bottom:28px;
}
.forever-buttons{
    display:flex;gap:16px;justify-content:center;
    flex-wrap:wrap;position:relative;
    min-height:60px;
}
.btn-yes{
    font-size:1.1rem;padding:16px 48px;
    box-shadow:0 0 30px rgba(255,64,129,.3);
    animation:yesGlow 2s ease infinite;
}
@keyframes yesGlow{
    0%,100%{box-shadow:0 0 20px rgba(255,64,129,.3)}
    50%    {box-shadow:0 0 40px rgba(255,64,129,.5),0 0 60px rgba(224,64,251,.2)}
}
.btn-no{
    transition:all .3s ease;
    position:relative;
}
.forever-msg{
    margin-top:20px;
    font-size:.95rem;color:var(--c-soft);
    font-style:italic;min-height:24px;
}

/* ═══════════════════════════════════════════
   SCREEN 8 — MEMORY SLIDESHOW
   ═══════════════════════════════════════════ */
.memory-screen{
    background:radial-gradient(ellipse at 50% 50%,#150020,var(--c-bg) 70%);
}
.slideshow-wrap{
    position:relative;
    width:100%;max-width:480px;margin:0 auto;
    aspect-ratio:16/10;border-radius:var(--r-card);
    overflow:hidden;
    box-shadow:0 8px 40px rgba(0,0,0,.5);
}
.slideshow{position:relative;width:100%;height:100%}
.slide{
    position:absolute;inset:0;
    background-size:cover;background-position:center;
    opacity:0;
    transition:opacity 1.5s ease;
    /* Ken Burns */
    animation:kenBurns 25s ease infinite alternate;
    /* Gradient placeholder if image missing */
    background-color:#1a0a2e;
}
.slide:nth-child(1){background-color:#2a1040}
.slide:nth-child(2){background-color:#1a0a2e}
.slide:nth-child(3){background-color:#10082e}
.slide.active{opacity:1}

@keyframes kenBurns{
    0%  {transform:scale(1) translate(0,0)}
    100%{transform:scale(1.12) translate(-2%,-1.5%)}
}
.slide:nth-child(2){animation-direction:alternate-reverse}
.slide:nth-child(3){animation-duration:30s}

.slide-arrow{
    position:absolute;top:50%;transform:translateY(-50%);
    z-index:5;width:40px;height:40px;border-radius:50%;
    background:rgba(0,0,0,.35);
    backdrop-filter:blur(4px);-webkit-backdrop-filter:blur(4px);
    font-size:1.4rem;color:#fff;
    display:flex;align-items:center;justify-content:center;
    transition:background .3s,transform .3s;
}
.slide-arrow:hover{background:rgba(255,64,129,.4);transform:translateY(-50%) scale(1.1)}
.slide-prev{left:10px}
.slide-next{right:10px}

.slide-dots{
    position:absolute;bottom:12px;left:50%;
    transform:translateX(-50%);
    display:flex;gap:8px;z-index:5;
}
.slide-dot{
    width:8px;height:8px;border-radius:50%;
    background:rgba(255,255,255,.35);
    transition:background .3s,transform .3s;
    cursor:pointer;
}
.slide-dot.active{background:var(--c-pink);transform:scale(1.3)}

/* ═══════════════════════════════════════════
   SCREEN 9 — LOCK SCREEN
   ═══════════════════════════════════════════ */
.lock-screen{
    background:radial-gradient(ellipse at 50% 40%,#0e0020,#050010 70%);
}
.lock-content{max-width:340px}
.lock-icon{
    width:80px;height:100px;margin:0 auto 20px;
    animation:lockFloat 4s ease infinite;
}
@keyframes lockFloat{
    0%,100%{transform:translateY(0)}
    50%{transform:translateY(-8px)}
}
.lock-svg{width:100%;height:100%}
.lock-body{fill:rgba(255,64,129,.15);stroke:var(--c-pink);stroke-width:2}
.lock-shackle{stroke:var(--c-pink);transition:transform .6s var(--ease-spring)}
.lock-hole{fill:var(--c-pink)}

.lock-icon.unlocked .lock-shackle{
    transform:translateY(-8px) rotate(-15deg);
    transform-origin:right center;
}

.lock-title{
    font-family:var(--font-display);
    font-size:clamp(1.3rem,4vw,1.6rem);font-weight:700;
    margin-bottom:6px;
}
.lock-sub{
    font-size:.9rem;color:var(--c-text-dim);
    font-weight:300;margin-bottom:24px;
}
.code-display{
    display:flex;justify-content:center;gap:14px;
    margin-bottom:28px;
}
.code-dot{
    width:18px;height:18px;border-radius:50%;
    border:2px solid rgba(255,64,129,.3);
    background:transparent;
    transition:background .2s,border-color .2s,transform .2s;
}
.code-dot.filled{
    background:var(--c-pink);
    border-color:var(--c-pink);
    transform:scale(1.15);
    box-shadow:0 0 10px rgba(255,64,129,.4);
}
.keypad{
    display:grid;grid-template-columns:repeat(3,1fr);
    gap:10px;max-width:260px;margin:0 auto;
}
.key-btn{
    padding:16px;border-radius:14px;
    background:rgba(255,255,255,.06);
    border:1px solid rgba(255,255,255,.08);
    font-size:1.2rem;font-weight:600;
    transition:all .15s ease;
}
.key-btn:hover{background:rgba(255,64,129,.15);border-color:rgba(255,64,129,.3)}
.key-btn:active{transform:scale(.92)}
.key-btn.fn{font-size:.85rem;font-weight:500}

.lock-hint{
    margin-top:20px;
    font-size:.85rem;color:var(--c-text-dim);
    font-style:italic;min-height:20px;
    transition:opacity .4s;
}

.code-display.shake{animation:shake .4s ease}

/* ═══════════════════════════════════════════
   SCREEN 10 — ENVELOPE
   ═══════════════════════════════════════════ */
.envelope-screen{
    background:radial-gradient(ellipse at 50% 50%,#1a0028,var(--c-bg) 70%);
}
.envelope-prompt{
    font-family:var(--font-display);
    font-size:clamp(1.1rem,3vw,1.4rem);
    font-style:italic;color:var(--c-soft);
    margin-bottom:24px;
    animation:neonFadeIn 1s ease both;
}
.envelope-icon{
    font-size:5rem;
    cursor:pointer;
    animation:heartPulse 2s ease infinite;
    filter:drop-shadow(0 4px 20px rgba(255,64,129,.4));
    transition:transform .3s var(--ease-spring);
    user-select:none;
}
.envelope-icon:hover{transform:scale(1.15)}
.envelope-icon:active{transform:scale(.95)}
.envelope-tap-hint{
    font-size:.85rem;color:var(--c-text-dim);
    margin-top:12px;font-style:italic;
    animation:neonFadeIn 1.5s ease both 1s;
}

/* Letter card (revealed after tap) */
.letter-revealed{
    width:min(400px,90vw);
    margin:0 auto;
    max-height:60vh;
    overflow-y:auto;
    animation:letterReveal .8s var(--ease-spring) both;
}
@keyframes letterReveal{
    from{opacity:0;transform:translateY(40px) scale(.9)}
    to{opacity:1;transform:translateY(0) scale(1)}
}
.letter-card{
    background:rgba(255,255,255,.95);
    border-radius:16px;
    padding:clamp(20px,5vw,32px);
    color:#2a1a3a;
    text-align:left;
    box-shadow:0 8px 40px rgba(255,64,129,.15);
}
.letter-greeting{
    font-family:var(--font-display);
    font-size:clamp(1rem,3vw,1.25rem);
    font-weight:700;color:#c05070;
    margin-bottom:12px;
}
.letter-body{
    font-size:clamp(.85rem,2.2vw,.95rem);
    line-height:1.75;margin-bottom:10px;
    color:#3a2a4a;
}
.letter-closing{
    font-family:var(--font-display);
    font-size:clamp(.9rem,2.5vw,1.05rem);
    font-style:italic;color:#c05070;
    margin-top:16px;
}
.letter-signature{font-size:1.2rem}

/* ═══════════════════════════════════════════
   SCREEN 11 — FINAL (SCORE + QR + SHARE)
   ═══════════════════════════════════════════ */
.final-screen{
    background:radial-gradient(ellipse at 50% 30%,#200030,var(--c-bg) 70%);
}
.final-content{padding-bottom:40px}
.final-title{
    font-family:var(--font-display);
    font-size:clamp(1.6rem,5vw,2.2rem);font-weight:700;
    margin-bottom:20px;
    background:linear-gradient(135deg,#fff,var(--c-soft));
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;
    background-clip:text;
}
.score-ring{
    position:relative;width:140px;height:140px;margin:0 auto 16px;
}
.score-ring-svg{width:100%;height:100%}
#scoreRingFill{
    transition:stroke-dashoffset 2s var(--ease-out);
}
.score-number{
    position:absolute;inset:0;
    display:flex;align-items:center;justify-content:center;
    font-family:var(--font-display);
    font-size:2.2rem;font-weight:900;
}
.score-number::after{content:'%';font-size:1rem;font-weight:400;opacity:.6}
.final-rating{
    font-size:clamp(.95rem,2.5vw,1.1rem);
    color:var(--c-soft);margin-bottom:8px;
    font-weight:500;
}
.final-message{
    font-size:clamp(.9rem,2.5vw,1rem);
    color:var(--c-text-dim);font-weight:300;
    margin-bottom:28px;
}
.qr-section{margin-bottom:28px}
.qr-heading{
    font-family:var(--font-display);
    font-size:1.1rem;font-weight:600;
    margin-bottom:14px;color:var(--c-soft);
}
#qrCanvas{
    margin:0 auto;
    border-radius:12px;
    background:#fff;
    padding:8px;
    box-shadow:0 4px 20px rgba(0,0,0,.3);
}
.qr-hint{
    font-size:.8rem;color:var(--c-text-dim);
    margin-top:8px;font-weight:300;
}
.final-buttons{
    display:flex;gap:12px;justify-content:center;flex-wrap:wrap;
}

/* ═══════════════════════════════════════════
   TOAST
   ═══════════════════════════════════════════ */
.toast{
    position:fixed;bottom:32px;left:50%;
    transform:translateX(-50%) translateY(80px);
    padding:12px 28px;border-radius:50px;
    background:rgba(255,64,129,.9);
    backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
    color:#fff;font-size:.9rem;font-weight:500;
    box-shadow:0 4px 20px rgba(255,64,129,.3);
    z-index:99999;pointer-events:none;
    opacity:0;
    transition:transform .4s var(--ease-spring),opacity .4s;
}
.toast.show{
    opacity:1;
    transform:translateX(-50%) translateY(0);
}

/* ═══════════════════════════════════════════
   SCROLLBAR
   ═══════════════════════════════════════════ */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:rgba(255,64,129,.3);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:rgba(255,64,129,.5)}

/* ═══════════════════════════════════════════
   RESPONSIVE
   ═══════════════════════════════════════════ */
@media(max-width:480px){
    .screen{padding:16px 12px}
    .glass-card{padding:clamp(18px,4vw,28px)}
    .name-card{padding:24px 18px}
    .forever-card{padding:24px 18px}
    .keypad{gap:8px;max-width:220px}
    .key-btn{padding:13px}
    .letter-revealed{width:90vw}
    .score-ring{width:120px;height:120px}
    .final-buttons{flex-direction:column;gap:10px}
    .btn-primary,.btn-secondary{width:100%}
}
@media(max-width:360px){
    .neon-name{font-size:clamp(2.2rem,10vw,4rem)}
}
@media(min-width:768px){
    .screen-content{max-width:600px}
    .slideshow-wrap{max-width:540px}
}

/* ═══════════════════════════════════════════
   REDUCED MOTION
   ═══════════════════════════════════════════ */
@media(prefers-reduced-motion:reduce){
    *,*::before,*::after{
        animation-duration:.01ms !important;
        animation-iteration-count:1 !important;
        transition-duration:.01ms !important;
    }
    .floating-heart{display:none}
}
